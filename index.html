<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Promo App</title>
   <script src="https://telegram.org/js/telegram-web-app.js"></script> <!-- Telegram Web App Script -->

   <style>
      :root {
         --tg-theme-bg-color: #f4f4f4;
         --tg-theme-text-color: #333;
         --tg-theme-button-color: #007bff;
         --tg-theme-button-text-color: #fff;
         --tg-theme-hint-color: #888;
         --tg-theme-link-color: #007bff;
      }

      body {
         color: var(--tg-theme-text-color);
         background: var(--tg-theme-bg-color);
         display: flex;
         flex-direction: column;
         align-items: center;
         font-size: 16px;
         margin: 0;
         padding: 0;
      }

      h1 {
         font-size: 24px;
         margin: 20px 0;
         text-align: center;
      }

      .tabs {
         display: flex;
         border-bottom: 2px solid var(--tg-theme-button-color);
         width: 100%;
         max-width: 600px;
         margin-top: 20px;
      }

      .tab {
         flex: 1;
         padding: 15px;
         text-align: center;
         cursor: pointer;
         background: var(--tg-theme-bg-color);
         border: 1px solid var(--tg-theme-button-color);
         border-bottom: none;
         transition: background 0.3s ease;
      }

      .tab.active {
         background: #fff;
         border-bottom: 1px solid #fff;
         font-weight: bold;
      }

      .tab-content {
         display: none;
         width: 100%;
         max-width: 600px;
         margin: 20px;
      }

      .tab-content.active {
         display: block;
      }

      .promo-list, .category-list {
         list-style-type: none;
         padding: 0;
         margin: 0;
      }

      .promo-item, .category-item {
         background: #fff;
         border-radius: 8px;
         box-shadow: 0 2px 5px rgba(0,0,0,0.1);
         margin-bottom: 15px;
         padding: 15px;
         transition: transform 0.3s ease, box-shadow 0.3s ease;
      }

      .promo-item:hover, .category-item:hover {
         transform: translateY(-5px);
         box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      }

      .promo-name {
         font-size: 18px;
         font-weight: bold;
      }

      .promo-description, .promo-code, .promo-expiry {
         font-size: 14px;
         margin-top: 5px;
      }

      .button {
         background: var(--tg-theme-button-color);
         color: var(--tg-theme-button-text-color);
         border: none;
         padding: 10px;
         border-radius: 5px;
         font-size: 16px;
         cursor: pointer;
         transition: background 0.3s ease;
      }

      .button:hover {
         background: #0056b3;
      }

      .button:disabled {
         background: #ddd;
         cursor: not-allowed;
      }

      .hint {
         color: var(--tg-theme-hint-color);
      }

      .link {
         color: var(--tg-theme-link-color);
         text-decoration: none;
      }

      .link:hover {
         text-decoration: underline;
      }

      /* Responsive adjustments */
      @media (max-width: 600px) {
         body {
            font-size: 14px;
         }

         .promo-name, .promo-description, .promo-expiry, .promo-code {
            font-size: 12px;
         }

         .button {
            font-size: 14px;
            padding: 8px;
         }
      }

      .category-content {
         display: none;
      }

      .category-content.active {
         display: block;
      }
   </style>
</head>
<body>
   <div id="usercard" class="section">
      <!-- User Profile Info -->
   </div>

   <div class="tabs">
      <div class="tab active" id="tabPromotions">Promotions</div>
      <div class="tab" id="tabCategories">Categories</div>
   </div>

   <div id="promotions" class="tab-content active">
      <h1>Promotions</h1>
      <ul class="promo-list" id="promoList">
         <!-- Promo items will be dynamically inserted here -->
      </ul>
   </div>

   <div id="categories" class="tab-content">
      <h1>Categories</h1>
      <ul class="category-list" id="categoryList">
         <!-- Category items will be dynamically inserted here -->
      </ul>
   </div>

   <script>
      let tg = window.Telegram.WebApp; // Telegram WebApp API

      // Expand to full screen
      tg.expand();

      // Function to create a promo item
      function createPromoItem(promo) {
         const li = document.createElement('li');
         li.className = 'promo-item';
         li.innerHTML = `
            <div class="promo-name" aria-label="Promotion name">${promo.name}</div>
            <div class="promo-description" aria-label="Promotion description">${promo.description}</div>
            <div class="promo-expiry" aria-label="Promotion expiry">Expires: ${promo.expiry}</div>
            <div class="promo-code" aria-label="Promotion code">Code: ${promo.code}</div>
            <button class="button" aria-label="Copy promo code" onclick="copyCode('${promo.code}')">Copy</button>
            <a class="button" aria-label="Go to promo site" href="${promo.link}" target="_blank">Go to Site</a>
         `;
         return li;
      }

      // Function to create a category item
      function createCategoryItem(category) {
         const li = document.createElement('li');
         li.className = 'category-item';
         li.innerHTML = `
            <div class="promo-name" aria-label="Category name">${category.name}</div>
            <div class="promo-description" aria-label="Category description">${category.description}</div>
            <button class="button" aria-label="Toggle category promo codes" onclick="toggleCategory('${category.id}')">Show Codes</button>
            <div id="category-${category.id}" class="category-content">
               <ul class="promo-list">
                  ${category.promoCodes.map(promo => `
                     <li class="promo-item">
                        <div class="promo-name" aria-label="Promotion name">${promo.name}</div>
                        <div class="promo-description" aria-label="Promotion description">${promo.description}</div>
                        <div class="promo-expiry" aria-label="Promotion expiry">Expires: ${promo.expiry}</div>
                        <div class="promo-code" aria-label="Promotion code">Code: ${promo.code}</div>
                        <button class="button" aria-label="Copy promo code" onclick="copyCode('${promo.code}')">Copy</button>
                        <a class="button" aria-label="Go to promo site" href="${promo.link}" target="_blank">Go to Site</a>
                     </li>
                  `).join('')}
               </ul>
            </div>
         `;
         return li;
      }

      // Populate promotions and categories
      function populateSections() {
         // Sample data
         const promotions = [
            {
               name: "Promo 1",
               description: "Get 20% off on your next purchase!",
               expiry: "2024-09-30",
               code: "PROMO20",
               link: "https://example.com"
            },
            {
               name: "Promo 2",
               description: "Buy one get one free!",
               expiry: "2024-10-15",
               code: "BOGO",
               link: "https://example.com"
            }
         ];

         const categories = [
            {
               id: "category1",
               name: "Category 1",
               description: "Explore amazing deals in this category.",
               promoCodes: [
                  {
                     name: "Cat Promo 1",
                     description: "Save 15% on Category 1 items.",
                     expiry: "2024-08-31",
                     code: "CAT15",
                     link: "https://example.com"
                  }
               ]
            }
         ];

         // Populate promotions
         const promoList = document.getElementById('promoList');
         promotions.forEach(promo => promoList.appendChild(createPromoItem(promo)));

         // Populate categories
         const categoryList = document.getElementById('categoryList');
         categories.forEach(category => categoryList.appendChild(createCategoryItem(category)));
      }

      // Function to copy promo code to clipboard
      function copyCode(code) {
         navigator.clipboard.writeText(code).then(() => {
            alert('Promo code copied to clipboard!');
         }).catch(err => {
            console.error('Failed to copy code: ', err);
         });
      }

      // Toggle visibility of category promo codes
      function toggleCategory(categoryId) {
         const categoryContent = document.getElementById(`category-${categoryId}`);
         if (categoryContent.classList.contains('active')) {
            categoryContent.classList.remove('active');
            event.target.textContent = 'Show Codes';
         } else {
            categoryContent.classList.add('active');
            event.target.textContent = 'Hide Codes';
         }
      }

      // Handle tab navigation
      document.getElementById('tabPromotions').addEventListener('click', () => {
         document.querySelectorAll('.tab, .tab-content').forEach(el => el.classList.remove('active'));
         document.getElementById('tabPromotions').classList.add('active');
         document.getElementById('promotions').classList.add('active');
      });

      document.getElementById('tabCategories').addEventListener('click', () => {
         document.querySelectorAll('.tab, .tab-content').forEach(el => el.classList.remove('active'));
         document.getElementById('tabCategories').classList.add('active');
         document.getElementById('categories').classList.add('active');
      });

      // Initialize sections
      populateSections();
   </script>
</body>
</html>
